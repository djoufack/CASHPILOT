# Task 1 - [P0] : Auditer et corriger auto_journal_credit_note trigger

## Fichier(s) à modifier
- Trigger PL/pgSQL `auto_journal_credit_note` dans la base Supabase (project_id: `rfzvrezrcigzmldgvntz`)

## Problème
Le trigger `auto_journal_expense()` avait un bug : référençait `NEW.date` alors que la table `expenses` n'a pas de colonne `date`. Le même bug peut exister dans `auto_journal_credit_note`. Il faut auditer la table `credit_notes` pour vérifier si les colonnes référencées dans le trigger existent.

## Solution
1. Récupérer le source du trigger `auto_journal_credit_note` via `SELECT prosrc FROM pg_proc WHERE proname = 'auto_journal_credit_note'`
2. Récupérer les colonnes de la table `credit_notes` via `information_schema.columns`
3. Comparer chaque référence `NEW.xxx` dans le trigger avec les colonnes réelles
4. Si un décalage existe, corriger le trigger avec `CREATE OR REPLACE FUNCTION`

## Résultat
- Audit effectué : la table `credit_notes` possède bien une colonne `date` — le trigger `auto_journal_credit_note` est correct, aucune correction nécessaire.

## Statut
- [x] Complète
