# Task 2 - [P0] : Ajouter expense_date à expenses

## Fichier(s) à modifier
- Migration SQL Supabase (project_id: `rfzvrezrcigzmldgvntz`)
- Trigger `auto_journal_expense()` PL/pgSQL
- Composants frontend qui créent des dépenses (chercher dans `src/`)

## Problème
La table `expenses` n'a pas de colonne `date` explicite, seulement `created_at` (timestamptz). Les tables `invoices` et `payments` ont respectivement `date` et `payment_date`. Le trigger `auto_journal_expense` utilise déjà `NEW.created_at::date` comme workaround.

## Solution
1. `ALTER TABLE expenses ADD COLUMN expense_date DATE;`
2. `UPDATE expenses SET expense_date = created_at::date WHERE expense_date IS NULL;`
3. Mettre à jour le trigger pour utiliser `COALESCE(NEW.expense_date, NEW.created_at::date, CURRENT_DATE)`
4. Mettre à jour les composants frontend qui créent des dépenses pour inclure `expense_date`

## Statut
- [ ] Complète
