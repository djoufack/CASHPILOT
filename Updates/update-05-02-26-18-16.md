# Update 05-02-26-18-16 : Vues Kanban et Agenda pour Timesheets

## Résumé

Ajout de deux nouvelles vues à l'interface de gestion des feuilles de temps (Timesheets) :
- **Vue Kanban** : Organisation par statut avec drag & drop
- **Vue Agenda** : Liste chronologique groupée par période

---

## Nouveaux fichiers créés

### 1. `src/components/TimesheetKanbanView.jsx`

Composant wrapper autour de `GenericKanbanView` pour afficher les timesheets en colonnes par statut.

**Fonctionnalités :**
- 4 colonnes de statut : Brouillon, En cours, Validé, Facturé
- Drag & drop pour changer le statut d'une entrée
- Affichage de l'horaire, durée, client/projet
- Couleurs distinctes par statut (gris, bleu, vert, violet)
- Mise à jour automatique via `updateTimesheet()`

### 2. `src/components/TimesheetAgendaView.jsx`

Composant wrapper autour de `GenericAgendaView` pour afficher les timesheets groupées par période.

**Fonctionnalités :**
- Groupement automatique : En retard, Aujourd'hui, Demain, Cette semaine, Plus tard
- Affichage du client/projet, horaire, durée
- Actions d'édition et suppression
- Entrées "approved" et "invoiced" ne s'affichent pas comme "en retard"

---

## Fichiers modifiés

### `src/pages/TimesheetsPage.jsx`

**Modifications :**
- Import des nouveaux composants `TimesheetKanbanView` et `TimesheetAgendaView`
- Import des icônes `LayoutGrid` et `CalendarRange` de lucide-react
- Ajout de 4 onglets dans la barre de navigation : Calendar, List, Kanban, Agenda
- Rendu conditionnel pour chaque vue
- Utilisation des clés i18n pour les labels des onglets

### `src/i18n/locales/en.json`

```json
"timesheets": {
  "status": {
    "draft": "Draft",
    "in_progress": "In Progress",
    "approved": "Approved",
    "invoiced": "Invoiced"
  },
  "views": {
    "calendar": "Calendar",
    "list": "List",
    "kanban": "Kanban",
    "agenda": "Agenda"
  },
  "agenda": {
    "overdue": "Overdue",
    "today": "Today",
    "tomorrow": "Tomorrow",
    "thisWeek": "This Week",
    "later": "Later"
  }
}
```

### `src/i18n/locales/fr.json`

```json
"timesheets": {
  "status": {
    "draft": "Brouillon",
    "in_progress": "En cours",
    "approved": "Validé",
    "invoiced": "Facturé"
  },
  "views": {
    "calendar": "Calendrier",
    "list": "Liste",
    "kanban": "Kanban",
    "agenda": "Agenda"
  },
  "agenda": {
    "overdue": "En retard",
    "today": "Aujourd'hui",
    "tomorrow": "Demain",
    "thisWeek": "Cette semaine",
    "later": "Plus tard"
  }
}
```

### `src/i18n/locales/nl.json`

```json
"timesheets": {
  "status": {
    "draft": "Concept",
    "in_progress": "In uitvoering",
    "approved": "Goedgekeurd",
    "invoiced": "Gefactureerd"
  },
  "views": {
    "calendar": "Kalender",
    "list": "Lijst",
    "kanban": "Kanban",
    "agenda": "Agenda"
  },
  "agenda": {
    "overdue": "Achterstallig",
    "today": "Vandaag",
    "tomorrow": "Morgen",
    "thisWeek": "Deze week",
    "later": "Later"
  }
}
```

---

## Architecture technique

### Composants réutilisés

| Composant | Utilisation |
|-----------|-------------|
| `GenericKanbanView` | Base pour TimesheetKanbanView avec @dnd-kit |
| `GenericAgendaView` | Base pour TimesheetAgendaView avec groupement par date |
| `useTimesheets` | Hook pour updateTimesheet() |

### Statuts de timesheet

| Statut | Clé | Couleur |
|--------|-----|---------|
| Brouillon | `draft` | Gris (`bg-gray-500/20`) |
| En cours | `in_progress` | Bleu (`bg-blue-500/20`) |
| Validé | `approved` | Vert (`bg-green-500/20`) |
| Facturé | `invoiced` | Violet (`bg-purple-500/20`) |

---

## Interface utilisateur

### Barre d'onglets responsive

- **Desktop** : Icône + texte traduit
- **Mobile** : Icône seule pour économiser l'espace
- **Style actif** : Fond orange translucide, texte orange

### Vue Kanban

- Colonnes défilables horizontalement
- Hauteur adaptative selon le viewport
- Feedback visuel au survol lors du drag
- Cartes affichant : horaire, client/projet, durée, badge de statut

### Vue Agenda

- Sections avec bordure colorée (rouge=retard, orange=aujourd'hui, etc.)
- Compteur d'éléments par section
- Grille responsive (1-3 colonnes selon la largeur)
- Actions d'édition accessibles sur chaque carte

---

## Tests recommandés

1. Naviguer vers `/app/timesheets`
2. Basculer entre les 4 vues via les onglets
3. En vue Kanban : glisser une entrée vers une autre colonne
4. Vérifier que le statut est mis à jour en base de données
5. En vue Agenda : vérifier le groupement correct par date
6. Tester le responsive sur mobile
7. Tester les 3 langues (EN/FR/NL)

---

## Dépendances utilisées

- `@dnd-kit/core` v6.1.0 (déjà installé)
- `@dnd-kit/sortable` v8.0.0 (déjà installé)
- `date-fns` (déjà installé)
- `framer-motion` (déjà installé)
- `lucide-react` (déjà installé)
